<script>
    var TrafficLight = function () {
    var count = 0;
    var currentState = new Red(this);
 
    this.change = function (state) {
        // limits number of changes
        if (count++ >= 10) return;
        currentState = state;
        currentState.go();
    };
 
    this.start = function () {
        currentState.go();
    };
}
 
var Red = function (light) {
    this.light = light;
 
    this.go = function () {
        console.log("Red --> for 30 Seconds");
        setTimeout(function(){light.change(new Green(light));}, 1000);
    }
};
 
var Yellow = function (light) {
    this.light = light;
 
    this.go = function () {
        console.log("Yellow --> for 10 seconds");
        setTimeout(function(){light.change(new Red(light));}, 1000);
    }
};
 
var Green = function (light) {
    this.light = light;
    this.go = function () {
        console.log("Green --> for 30 Seconds");
        setTimeout(function(){light.change(new Yellow(light));}, 1000);
    }
};

window.onload = function() {
      var light = new TrafficLight();
    light.start();
};
</script>